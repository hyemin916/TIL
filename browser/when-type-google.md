# 브라우저 주소창에 google.com을 입력하면 생기는 일

## 기초 개념

**웹 페이지**란 브라우저가 읽을 수 있는 형태로 포맷된 텍스트 파일이다. 이 포맷은 HyperText Markup Language(HTML)라 부른다. 이 파일들은 파일 저장 서비스를 제공하고 파일 전송 요청을 기다리는 컴퓨터에 위치한다. 이 컴퓨터들을 서버라 부른다. 컨텐츠를 보관하고 필요한 이들에게 제공(serve)하기 때문이다.

**서버**의 종류는 다양한데, 가장 일반적인 것은 웹 페에이지를 제공하는 <U>웹 서버</U>이다. 웹 브라우저 혹은 다른 어플리케이션과 상호작용할 어플리케이션 베이스 코드를 가지고 있는 <U>어플리케이션 서버</U>도 있다. <U>데이터베이스 서버</U>는 필요할 때 업데이트하고 참조할 수 있는 데이터베이스를 가지고 있는 서버이다.

실제 택배 서비스와 마찬가지로, 콘텐츠를 배달하기 위해 이러한 서버에는 해당 콘텐츠가 필요한 사람이 배달을 요청하는 '편지'를 만들 수 있도록 주소가 있어야 한다. 컨텐츠를 요청한 사람 또한 서버가 컨텐츠를 배달할 수 있는 주소를 가지고 있다. 이 주소들을 IP(Internet Protocol) 주소라 부르는, 온점으로 구분된 0부터 255까지의 4개의 숫자 집합이다.

또 알야할 중요한 개념은, 배달을 위한 택배 서비스 트래픽은 다음 두가지 중 하나일 수 있다는 것이다. 바로 Transmission Control Protocol(TCP)과 User Datagram Protocol(UDP)이다. 각각의 개념은 서버가 컨텐츠를 제공 혹은 배달하는 방식을 결정한다.

**TCP**는 주로 위키피디아나 구글과 같은 정적인 웹사이트 전달, 이메일 서비스, 컴퓨터에 파일을 다운로드 받는 데에 사용된다. 왜냐하면 TCP는 요구된 모든 컨텐츠가 전달되는 것을 보장하기 때문이다.
작은 데이터 패킷으로 파일을 보내고 각 패킷과 함께 패킷이 전달되었음을 확인하는 방식으로 이 작업을 수행한다. 이 덕분에 무언가를 다운로드 받는 중 인터넷 연결이 갑자기 끊어지고 다시 돌아와도 처음부터 다시 시작할 필요가 없다. 서버는 당신이 얼마나 많은 패킷을 가지고 있고 얼마나 받아야 하는지 정확히 알고 있기 때문이다. TCP의 단점은 다음 것을 전송하기 전에 당신이 패킷을 가졌는지 아닌지 확인 해야하기 때문에 느린 경향이 있다는 것이다.

반면 **UDP**는 라이브 영상이나 온라인 게임을 제공하는 데에 사용된다. UDP는 정보가 전달됐는지 아닌지 확인하지 않아서 TCP보다 훨씬 빠르기 때문이다. UDP는 정보를 보내는 것만 신경쓸 뿐이다. 이 때문에 라이브 영상을 보고 있다가 인터넷 연결이 끊기면 컨텐츠가 중지된다. 다시 연결이 되어도 방송의 최근 스트림만 볼 수 있고 놓친 것은 영원히 놓친게 된다. 온라인 비디오게임도 동일하다.

DNS 서비스를 이용할 때는 UDP를 사용하고 웹서버에 HTML을 요청할 때는 TCP를 이용한다.

## What actually happens...

원래 질문으로 돌아와서, www.google.com을 웹 브라우저에 입력하고 엔터를 칠때 무슨 일이 일어나는지 알아보자. 첫번째로는 당신의 브라우저가 웹사이트를 전에 방문했는지, IP 주소를 알고있는지 알아보기 위해 캐시를 살펴본다. 만약 URL의 IP 주소를 찾지 못하면 운영 체제에 웹 사이트를 찾도록 요청한다. 운영 체제가 URL의 주소를 체크하기 위해 첫번째로 가는 곳은 host 파일(/etc/hosts in Linux and Mac, c:\windows\system32\drivers\etc\hosts in Windows)이다. 만약 URL이 그 파일에 없으면, OS는 웹 페이지의 IP 주소를 찾기 위해 DNS 요청을 만들 것이다. 먼저 Resolver(or Internet Service Provider) Server에 IP주소를 찾기 위해 캐시 조회를 요청하고, Resolver가 알지 못하면 .COM TLD(Top Level Domain) 서버에 요청하도록 root sever에 요청한다. (만약 URL이 .net으로 끝난다면 TLD 서버는 .NET 등등 일 것이다.) TLD 서버는 다시 요청된 IP 서버가 있는지 캐시를 찾아볼 것이다. 없다면 URL과 연관된 권한있는 네임 서버를 가질 것이고, 네임서버에서 URL과 연관된 IP 주소를 반환할 것이다. 이 모든것이 수 밀리 초 안에 이루어진다.

OS가 IP 주소를 찾고 브라우저에게 알려준 후, 해당 IP 주소에 GET 요청을 한다. 요청이 만들어지면, 브라우저는 다시 OS에 요청을 보내고, OS는 앞서 얘기했던 TCP 트래픽 프로토콜로 요청을 패킹하고 IP 주소로 보낸다. 그 과정에서 OS와 서버의 방화벽은 보안 위반이 없는지 확인한다. 요청을 받으면 서버(일반적으로 해당 웹사이트에 사용 가능한 모든 서버로 트래픽을 전달하는 로드 밸런서)는 보안 세션을 초기화하기 위해 SSL 인증과 함께 선택된 서버의 IP주소와 함께 응답한다. 최종적으로 선택된 서버는 HTML, CSS 그리고 자바스크립트 파일을 OS에 보내고 OS는 이를 해석하기 위해 브라우저에 보낸다. 그리고 당신은 당신이 알고 있는 웹사이트를 보게 된다.

### 원글

[What Happens When You Type google.com Or Any Other URL In Your Browser And Press Enter](https://www.linkedin.com/pulse/what-happens-when-you-type-googlecom-any-other-url-buitrago-vargas#:~:text=So%20back%20to%20the%20main,the%20IP%20address%20is%20known.)
